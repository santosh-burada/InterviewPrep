version: "3"
services:
  backend:
    image: santoshburada/docker_sdk:v1.0
    container_name: docker_sdk-backend-1
    ports:
      - "8080:8000"
    restart: always
    volumes:
      - "upload:/tmp"
    networks:
      - dockersdk
    environment:
      DOCKER_HOST: "tcp://dnd:2375"
    env_file:
      - .secrets
    depends_on:
      - dnd
  dnd:
    image: docker
    container_name: dnd
    restart: always
    entrypoint: dockerd
    command: ["--host=0.0.0.0:2375"]
    privileged: true
    networks:
      - dockersdk
    volumes:
      - "upload:/tmp"

networks:
  dockersdk:
    name: dockersdk
    ipam:
      driver: default
      
volumes:
  upload:
    name: upload

